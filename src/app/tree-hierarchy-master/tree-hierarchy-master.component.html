<div class="page page-grid">
  <!-- page header -->
  <div style="opacity: 50%; display: flex;">
    <span class="font" routerLink="/hierarchy">Tree Hierarchy</span>
    <mat-icon>navigate_next</mat-icon>
    <span class="font" routerLink="/treeHierarchyMaster">Master</span>
  </div>
  <section class="tile" fullscreen="isFullscreen07">
    <!-- tile header -->
    <div class="tile-header dvd dvd-btm">
      <h1 class="custom-font"><strong>New Hierarchy</strong></h1>
      <div class="pull-right">
        <label style="font-size:xx-small;">{{ 'RequiredNote' }} <span style="color:red">(*)</span></label>
      </div>
    </div>
    <!-- tile body -->
    <form #hierarchyMaster="ngForm" novalidate class="form-validation">
      <div class="tile-body">
        <div class="row">
          <div class="form-group col-md-12">
            <label>{{ 'HierarchyName' }}</label><label class="error" style="font-size:medium">&nbsp;*</label>
            <div layout-wrap layout-gt-xs="row">
              <div flex-gt-xs="100">
                <input class="form-control" [(ngModel)]="hierarchyName" ng-maxlength="100" type="text" no-special-char
                  name="hierarchyName" id="hierarchyName" required #hierarchyNameInput="ngModel">
                <p class="help-block">
                  <span class="error"
                    *ngIf="hierarchyNameInput?.invalid && (hierarchyNameInput?.dirty || formSubmitted)">{{
                    'RequiredField' }}</span>
                  <span class="error" *ngIf="hierarchyNameInput?.errors?.['maxlength']">{{ 'HirarchyNameMaxLimit'
                    }}</span>
                </p>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="form-group col-md-12">

            <strong><a href="javascript:;" (click)="addNewLevel()">Add new level</a> </strong>
            <i><label class="pull-right" style="font-size:xx-small;color: red;">{{ 'DoubleClickToEdit' }}</label></i>

            <br>
            <!-- Use MatTable to generate the grid -->
            <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">

              <!-- Add your column definitions using matColumnDef -->
              <ng-container *ngFor="let column of gridOptions.columnDefs">
                <ng-container [matColumnDef]="column.name">
                  <th mat-header-cell *matHeaderCellDef>{{ column.displayName }}</th>
                  <td mat-cell *matCellDef="let element" appDoubleClickEdit
                    (doubleClick)="onCellDoubleClick(element, column)">
                    <ng-container *ngIf="column.name !== 'action'">
                      <ng-container *ngIf="column.name === 'type'">
                        <ng-container *ngIf="element.editing; else nonEditableTypeCell">
                          <mat-form-field>
                            <mat-label>Node Type</mat-label>
                            <mat-select [(ngModel)]="element.type" name="type">
                              <mat-option *ngFor="let option of column.editDropdownOptionsArray" [value]="option.id">
                                {{ option.type }}
                              </mat-option>
                            </mat-select>
                          </mat-form-field>

                        </ng-container>
                        <ng-template #nonEditableTypeCell>{{ element[column.name] }}</ng-template>
                      </ng-container>
                    </ng-container>
                    <!-- For non-action columns -->
                    <ng-container *ngIf="column.name !== 'action'">
                      <ng-container *ngIf="column.name !== 'type' && element.editing; else nonEditableCell">
                        <input matInput [(ngModel)]="element[column.name]" (blur)="onCellBlur(element)"
                          [name]="column.name" />
                      </ng-container>
                      <ng-template #nonEditableCell>{{ element[column.name] }}</ng-template>
                    </ng-container>
                    <!-- For action column -->
                    <ng-container *ngIf="column.name === 'action'">
                      <div class="ui-grid-cell-contents">
                        <a href="javascript:;" (click)="deleteRow(element)">
                          <span class="glyphicon glyphicon-trash"></span>
                        </a>
                      </div>
                    </ng-container>
                  </td>
                </ng-container>
              </ng-container>

              <!-- Use columnFieldNames for matHeaderRowDef -->
              <tr mat-header-row *matHeaderRowDef="columnFieldNames"></tr>
              <tr mat-row *matRowDef="let row; columns: columnFieldNames;"></tr>
            </table>

          </div>
        </div>

        <!-- ... -->
        <div class="row">
          <div class="form-group col-md-12">

            <div class="pull-right">
              <img src="https://cdn.dribbble.com/users/11609495/screenshots/18251844/hourglass.gif" height="20"
                alt="Loading..." *ngIf="disableSubmitButton" />
              <button class="btn btn-default" routerLink="/hierarchy" [disabled]="disableSubmitButton">{{ 'Cancel'
                }}</button>
              <button type="submit" class="btn btn-primary" (click)="submitForm(hierarchyMaster)"
                [disabled]="hierarchyMaster.form.invalid">{{
                'SUBMIT' }}</button>
            </div>


          </div>
        </div>
      </div>
    </form>
  </section>
</div>